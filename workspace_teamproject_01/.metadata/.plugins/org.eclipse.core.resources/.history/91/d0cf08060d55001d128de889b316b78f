<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mapper 태그 선언 -->
<!-- mapper 태그 안의 namespace 값은 -->
<!--[원하는 인터페이스 저장 패키지 경로]와 동일해야 한다. -->
<mapper namespace="com.naver.erp.BoardDAO">

	<!-- 게시판을 검색하는 -->
	<!-- select 구문을 내포한 <select> 태그 선언 -->
	<select id="getBoardList" resultType="java.util.HashMap">
	<!-- select 태그 안의 속성 -->
	<!-- id = "namespace 값 마지막의 인터페이스 내부의 메소드명 중 하나" -->
	<!-- parameterType = "SQL 구문에 참여하는 외부 데이터의 타입" -->
		<!-- 외부 데이터의 타입이 HashMap일 경우 "java.util.HashMap" 또는 "hashmap"을 사용한다. -->
		<!-- SQL에 참여하는 외부 데이터가 없을 경우 생략 가능 -->
	<!-- resultType = "SQL 구문의 결과 값을 저장할 수 있는 자바 자료형" -->
		<!-- SQL 결과값이 n행m열일 경우 -->
		<!-- 각 행이 저장되는 자바 자료형을 설정해야 한다. -->
		<!-- <주의> 모든 행이 저장되는 자바 자료형을 설정하면 안된다. -->
			<!-- 1행m열, n행m열 : "java.util.HashMap" 또는 "DTO 객체" -->
			<!-- 1행1열, n행1열 : String 또는 int 또는 double -->
			
	<!-- select 태그 특징 -->
	<!-- resultType이 "java.util.HashMap" : Alias가 HashMap의 키 값 -->
	<!-- resultType이 "com.naver.erp.BoardDTO" : Alias가 BoardDTO 객체의 속성변수명 -->
	
		select 
			b_no||''							as "b_no"
			, subject							as "subject"
			, writer							as "writer"
			, readcount||''						as "readcount"
			, to_char(reg_date, 'YYYY-MM-DD')	as "reg_date"
			, print_level||''					as "print_level"
		from 
			board
		<!-- where -->
		<!-- where 구문 -->
		order by
			group_no desc, print_no asc
	</select>


	<!-- 게시판을 입력하는 -->
	<!-- insert 구문을 내포한 <insert> 태그 선언 -->
	<insert id="insertBoard" parameterType="com.naver.erp.BoardDTO">
	<!-- insert 태그 안의 속성 -->
	<!-- id = "namespace 값 마지막의 인터페이스 내부의 메소드명 중 하나" -->
	<!-- parameterType = "SQL 구문에 참여하는 외부 데이터의 타입" -->
		<!-- 외부 데이터의 타입이 HashMap일 경우 "java.util.HashMap" 또는 "hashmap"을 사용한다. -->
		<!-- SQL에 참여하는 외부 데이터가 없을 경우 생략 가능 -->
	<!-- <주의> insert 태그 안에는 resultType 속성이 없다. -->
	<!-- 리턴 값은 자동으로 입력된 행의 개수인 int형이 리턴된다. -->
	
		insert into board(
			b_no
			, subject
			, writer
			, readcount
			, content
			, pwd
			, email
			, group_no
			, print_no
			, print_level 
		)
		values(
			(select nvl(max(b_no), 0) + 1 from board)
			, #{subject}
			<!-- BoardDTO 객체의 subject 속성변수 안의 값 삽입 -->
			<!-- #이 있을 경우 속성변수 안의 값이 문자면 ''를 붙여준다.-->
			, #{writer}
			<!-- BoardDTO 객체의 writer 속성변수 안의 값 삽입하기. # 있으므로 속성변수 안의 값이 문자면 ' 를 앞뒤에 붙여준다.-->
			<!-- #이 있을 경우 속성변수 안의 값이 문자면 ''를 붙여준다.-->
			, 0
			, #{content}
			<!-- BoardDTO 객체의 content 속성변수 안의 값 삽입 -->
			<!-- #이 있을 경우 속성변수 안의 값이 문자면 ''를 붙여준다.-->
			, #{pwd}
			<!-- BoardDTO 객체의 pwd 속성변수 안의 값 삽입 -->
			<!-- #이 있을 경우 속성변수 안의 값이 문자면 ''를 붙여준다.-->
			, #{email}
			<!-- BoardDTO 객체의 email 속성변수 안의 값 삽입 -->
			<!-- #이 있을 경우 속성변수 안의 값이 문자면 ''를 붙여준다.-->
			, (select nvl(max(b_no), 0) + 1 from board)
			, 0
			, 0
		)
	</insert>
	
	
	<!-- 게시판을 수정하는 -->
	<!-- update 구문을 내포한 <update> 태그 선언 -->
	<insert id="updateReadcount" parameterType="int">
		update board set readcount = readcount + 1 where b_no=${b_no}
	</insert>
	
	
	<!-- 게시판을 검색하는 -->
	<!-- select 구문을 내포한 <select> 태그 선언 -->
	<select id="getBoard" parameterType="int" resultType="com.naver.erp.BoardDTO">
	<!-- select 태그 안의 속성 -->
	<!-- id = "namespace 값 마지막의 인터페이스 내부의 메소드명 중 하나" -->
	<!-- parameterType = "SQL 구문에 참여하는 외부 데이터의 타입" -->
		<!-- 외부 데이터의 타입이 HashMap일 경우 "java.util.HashMap" 또는 "hashmap"을 사용한다. -->
		<!-- SQL에 참여하는 외부 데이터가 없을 경우 생략 가능 -->
	<!-- resultType = "SQL 구문의 결과 값을 저장할 수 있는 자바 자료형" -->
		<!-- SQL 결과값이 n행m열일 경우 -->
		<!-- 각 행이 저장되는 자바 자료형을 설정해야 한다. -->
		<!-- <주의> 모든 행이 저장되는 자바 자료형을 설정하면 안된다. -->
			<!-- 1행m열, n행m열 : "java.util.HashMap" 또는 "DTO 객체" -->
			<!-- 1행1열, n행1열 : String 또는 int 또는 double -->
			
	<!-- select 태그 특징 -->
	<!-- resultType이 "java.util.HashMap" : Alias가 HashMap의 키 값 -->
	<!-- resultType이 "com.naver.erp.BoardDTO" : Alias가 BoardDTO 객체의 속성변수명 -->
	
		select 
			b_no								as "b_no"
			, subject							as "subject"
			, writer							as "writer"
			, readcount							as "readcount"
			, to_char(reg_date, 'YYYY-MM-DD')	as "reg_date"
			, print_level						as "print_level"
		from 
			board
		<!-- where -->
		<!-- where 구문 -->
		order by
			group_no desc, print_no asc
		
	</select>

</mapper>