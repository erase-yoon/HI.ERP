package com.naver.erp;

import java.util.Map;

import org.mybatis.spring.SqlSessionTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

// ---------------------------------------------------------------
// [LoginDAOImpl 클래스] 선언
// ---------------------------------------------------------------
// 관용적으로 DAO가 들어간 클래스는 직접 DB연동을 하는 클래스이다.
// 직접 DB연동을 하는 클래스들을 보동 [DAO 클래스 또는 객체]라고 부른다.
// 직접 DB연동을 하는 클래스 앞에는 @Repository 어노테이션을 붙인다.
// ---------------------------------------------------------------
// @Repository를 붙임으로서 [DAO 클래스]임을 지정하게 되고
// Spring에서 인식해서 필요 시 객체화하여 사용한다.
// 직접 DB연동을 하는 클래스는 보통 인터페이스를 구현하여 만든다.
@Repository
public class loginDAOImpl implements LoginDAO{
	
	// ---------------------------------------------------------------
	// 속성변수 sqlSession에 SqlSessionTemplate 객체를 생성하여 저장
	// ---------------------------------------------------------------
	// @Autowired 어노테이션을 붙이면
	// 속성변수의 자료형에 맞는 SqlSessionTemplate 객체를 생성한 후
	// 객체의 메모리 위치 주소 값을 속성변수에 저장한다.
	// ---------------------------------------------------------------
	// SqlSessionTemplate 객체는 DB 연동 시 사용하는 객체이다.
	// xml 파일에 있는 SQL 구문을 읽어 DB에 SQL 명령을 내린 후
	// 그 결과값을 받아오는 객체이다.
	@Autowired
	private SqlSessionTemplate sqlSession;
	
	// ---------------------------------------------------------------
	// [로그인 아이디]와 [로그인 암호]의 존재 개수르 리턴하는 메소드 선언
	// ---------------------------------------------------------------
	// LoginController 객체 안의 메소드에서 호출된다.
	public int getCntLogin(Map<String, String> idPwd) {
	// [로그인 아이디]와 [로그인 암호]가 저장된
	// HashMap 객체가 들어오는 매개변수 선언
		
		int login_idCnt = this.sqlSession.selectOne(
				
				// 실행할 [SQL 구문의 위치 문자]를 지정
				"com.naver.erp.LoginDAO.getCntLogin"
				
				// 실행할 SQL 구문에서 사용할 데이터 지정
				, idPwd
		);
		return login_idCnt;
	}
}
