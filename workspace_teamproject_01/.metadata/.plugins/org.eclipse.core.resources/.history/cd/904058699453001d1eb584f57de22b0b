<!-- JSP 기술의 한 종류인 [Page Directive]를 이용하여 현 JSP 페이지 처리 방식 선언하기 -->
	<!-- 현재 이 JSP 페이지 실행 후 생성되는 문서는 HTML 이고,이 문서 안의 데이터는 UTF-8 방식으로 인코딩한다 라고 설정함 -->
	<!-- 현재 이 JSP 페이지는 UTF-8 방식으로 인코딩 한다 -->
	<!-- UTF-8 인코딩 방식은 한글을 포함 전 세계 모든 문자열을 부호화할 수 있는 방법이다. -->
	<!-- 모든 JSP 페이지 상단에 무조건 아래 설정이 들어간다. -->

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" import="java.util.*"%>
    
<!--JSP 페이지에서 사용할 [사용자 정의 태그]의 한 종류인 [JSTL의 C 코어 태그]를 사용하겠다고 선언-->
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!-- 사용자 정의 태그(Custom Tag) -->
<!-- 사용자가 원하는 기능을 구현하고 -->
<!-- [HTML 형태]로 표현하여 사용할 수 있는 -->
<!-- [사용자 정의 태그]를 말한다. -->
	
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Insert title here</title>
    </head>
    <body>
        <table border="1" cellpadding="5" style="border-collapse: collapse;">
            <tr bgcolor="lightblue">
                <th>번호</th>
                <th>제목</th>
                <th>작성자</th>
                <th>조회수</th>
                <th>등록일</th>
            </tr>
            <%
        
            // HttpServletRequst 객체에 게시판 목록을 꺼내서 출력 
            List<Map<String, String>> boardList = (List<Map<String, String>>)request.getAttribute("boardList");
            
            if(boardList!=null){
                out.println("<caption>총 개수 : " + boardList.size() + "개</caption>");

            	for(int i=0; i<boardList.size(); i++){
            		Map<String, String> map = boardList.get(i);
            		String b_no = map.get("b_no");
            		String subject = map.get("subject");
            		String writer = map.get("writer");
            		String readcount = map.get("readcount");
            		String reg_date = map.get("reg_date");

                    if(i%2==1){
                       out.println("<tr bgcolor='lightgray'>");
                    }else{
                        out.println("<tr>");
                    }
            		out.println("<td>" + b_no + "</td><td>" + subject + "</td><td>" + writer + "</td><td>" + readcount + "</td><td>" + reg_date + "</td></tr>");

                    // if(i%2==1){
                    //      out.println("<tr bgcolor='lightgray'><td>" + b_no + "</td><td>" + subject + "</td><td>" + writer + "</td><td>" + readcount + "</td><td>" + reg_date + "</td></tr>");
                    // }else{
                    //      out.println("<tr><td>" + b_no + "</td><td>" + subject + "</td><td>" + writer + "</td><td>" + readcount + "</td><td>" + reg_date + "</td></tr>");
                    // }
                    

                    // out.println("<tr bgcolor='" + (i%2==1?"lightgray":"") + "'><td>" + b_no + "</td><td>" + subject + "</td><td>" + writer + "</td><td>" + readcount + "</td><td>" + reg_date + "</td></tr>");

            	}
            }

            %>

            <!-- EL 문법과 C core 태그를 사용하여 -->
            <!-- HttpServletRequest 객체에 "boardList"라는 키 값으로 저장된 -->
            <!-- List 객체 안의 다량의 HashMap 객체의 데이터를 꺼내 -->
            <!-- HTML 태그 사이에 삽입 -->
            <c:forEach var="board" items="${requestScope.boardList}" varStatus="loopTagStatus">
                <tr bgcolor="${loopTagStatus.index%2==0?'':'lightgray'}">
                    <td>${board.b_no}</td>
                    <td>${board.subject}</td>
                    <td>${board.writer}</td>
                    <td>${board.readcount}</td>
                    <td>${board.reg_date}</td>
                </tr>
            </c:forEach>
            
        </table>
    </body>
</html>