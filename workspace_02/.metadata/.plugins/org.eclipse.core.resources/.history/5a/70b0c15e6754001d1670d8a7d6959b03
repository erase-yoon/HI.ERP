<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">

<!--  JQuery 라이브러리 수입 -->
<script src="/js/jquery-1.11.0.min.js"></script>
<script>
	$(function(){
		$("[name='writer']").val("사오정");
		$("[name='subject']").val("제목111");
		$("[name='content']").val("어쩌구저쩌구");
		$("[name='email']").val("a@naver.com");
		$("[name='pwd']").val("1111");
		
		$(".regBtn").bind("click",function(){
			regFormCheck();
		});
	})

	// 유효성 체크,비동기 방식으로 웹서버에 접속하는  함수 선언
	function regFormCheck(){

		// ---------------------------------------------------------------
		// 게시판 새글쓰기 관련 입력양식의 유효성 체크하기
		// ---------------------------------------------------------------

		// ---------------------------------------------------------------
		// 비동기 방식으로 웹서버에 접속해서 
		// 게시판 새글쓰기 관련 입력양식의 데이터 전송하기
		// ---------------------------------------------------------------
		$.ajax( {
				//------------------------------------------
				// 웹서버에 접속할 떄 사용할 URL 주소 지정
				//------------------------------------------
				url:"/boardRegProc.do"
				//------------------------------------------
				// 웹서버에 전송할 데이터를 보내는 방법 지정
				// 즉, 파라미터명(입력양식name값)과 파라미터값(입력양식value값)을 보내는 방법 지정
				//------------------------------------------
				,type:"post"
				//----------------------------------------------------------
				// 웹서버로 보낼 파라미터명(입력양식name값)과 파라미터값(입력양식value값)을 
				// 아래와 같은 형식의 문자열로 조합해서 설정하기
					// "파라미터명1=파라미터값1&파라미터명2=파라미터값2&~"
				//----------------------------------------------------------
				,data:$("[name='boardRegForm']").serialize() 
				//----------------------------------------------------------
				// 웹서버와 통신한 후 웹서버의 응답을 성공적으로 받았을 경우 실행할 익명함수 설정.
				// 익명함수의 매개변수에는 웹서버가 보내온 [새글의 입력된 행 개수]가 들어온다
				//----------------------------------------------------------
				,success:function(regCnt){
						//---------------------------------
						// 게시판 글 입력 성공 행의 개수가 1이면, 즉 입력이 성공했으면
						//---------------------------------
						if( regCnt==1 ){
							alert("새글 쓰기 성공!");
							if( confirm("다시 새 글을 쓰시겠습니까?")==false ){
								location.replace("/boardList.do")
							}else{
								document.boardRegForm.reset();
							}
						}
						else{
							alert("새글 쓰기 실패!")
						}
					
				}
				//----------------------------------------------------------
				// 웹서버와 통신이 실패했을 경우 실행할 익명함수 설정.
				//----------------------------------------------------------
				,error:function( ){
					alert("웹서버 접속 실패! 관리자에게 문의 바람!");
				}
		} )

	}
</script>




</head>
<body>
<center>
		<!--===========================================================-->
		<form name="boardRegForm">
		<!--===========================================================-->
		<table border="1" cellpadding="5" style="border-collapse:collapse" align="center"> 
			<caption> [새글쓰기]</caption>
			<tr>
				<th bgcolor="lightgray">이 름</th>
				<td>
				<!-------------------------------------------------------->
				<input type="text" name="writer" class="writer" size="10" maxlength="10">
				<!-------------------------------------------------------->
				</td>
			<tr>
				<th bgcolor="lightgray">제 목</th>
				<td>
				<!--------------------------------------------------------> 
				<input type="text" name="subject" class="subject" size="40" maxlength="30">
				<!-------------------------------------------------------->
				</td>
			</tr>
			<tr>
				<th bgcolor="lightgray">이메일</th>
				<td>
				<!-------------------------------------------------------->
				<input type="text" name="email" class="email" size="40" maxlength="30" >
				<!-------------------------------------------------------->
				</td>
			</tr>
			<tr>
				<th bgcolor="lightgray">내 용</th>
				<td>
				<!-------------------------------------------------------->
				<textarea name="content"  class="content" rows="13" cols="40"  maxlength="300"></textarea>
				<!-------------------------------------------------------->
				</td>
			</tr>
			<tr>
				<th bgcolor="lightgray">비밀번호</th>
				<td>
				<!-------------------------------------------------------->
				<input type="password" name="pwd" class="pwd"  size="8"  maxlength="4">
				<!-------------------------------------------------------->
				</td>
			</tr>
		</table>

		<div style="height:5px;"></div>

		<input type="button" value="저장" class="regBtn">
		<input type="reset" value="다시작성">
		<input type="button" value="목록보기" class="boardListBtn">

		<!--===========================================================-->
		</form>
		<!--===========================================================-->
		
</center>
</body>
</html>